!function(e,c){var r,a=e.jQuery||e.Cowboy||(e.Cowboy={});a.throttle=r=function(o,d,l,i){var n,s=0;function e(){var e=this,a=+new Date-s,t=arguments;function r(){s=+new Date,l.apply(e,t)}i&&!n&&r(),n&&clearTimeout(n),i===c&&o<a?r():!0!==d&&(n=setTimeout(i?function(){n=c}:r,i===c?o-a:o))}return"boolean"!=typeof d&&(i=l,l=d,d=c),a.guid&&(e.guid=l.guid=l.guid||a.guid++),e},a.debounce=function(e,a,t){return t===c?r(e,a,!1):r(e,t,!1!==a)}}(this),jQuery(document).ready(function(w){function e(e){0<(e=null==e?w(document).find("[data-pafe-woocommerce-checkout-form-id]"):w(document).find('[data-pafe-woocommerce-checkout-form-id="'+e+'"]')).length&&e.each(function(){var _=w(this).attr("data-pafe-woocommerce-checkout-form-id"),e=w(document).find("[data-pafe-form-builder-form-id="+_+"]"),g=[],v=new FormData,a=w(this);a.closest(".madxartwork-element");e.each(function(){if(null==w(this).data("pafe-form-builder-stripe")&&null==w(this).data("pafe-form-builder-html")){var e=w(this).closest(".madxartwork-field-type-checkbox.madxartwork-field-required");0<e.length&&e.find("input[type=checkbox]:checked").length,w(this).closest(".madxartwork-field-group").find("[data-pafe-form-builder-required]").html("");var a,t=w(this).attr("type"),r=w(this).attr("name"),o=w(this).closest("[data-pafe-form-builder-repeater-form-id]"),d="",l="",i="",n=-1,s=0;if(0<o.length&&($repeaterParents=w(this).parents("[data-pafe-form-builder-repeater-form-id]"),l=o.data("pafe-form-builder-repeater-id"),$repeaterParents.each(function(){var e=w(this).data("pafe-form-builder-repeater-id"),a=w(document).find('[data-pafe-form-builder-repeater-form-id="'+_+'"][data-pafe-form-builder-repeater-id="'+e+'"]');repeaterParentIndex=w(this).index()-a.index(),d+=e+"|index"+repeaterParentIndex+"|"+r.replace("[]","").replace("form_fields[","").replace("]","")+","}),i=o.data("pafe-form-builder-repeater-label"),e=w(document).find('[data-pafe-form-builder-repeater-id="'+o.data("pafe-form-builder-repeater-id")+'"]'),s=o.siblings('[data-pafe-form-builder-repeater-id="'+o.data("pafe-form-builder-repeater-id")+'"]').length+1,n=o.index()-e.index()),"file"==t)if(w(this).hasClass("error"))error++;else{let t=[];var c,r=w(this).attr("id").replace("form-field-","");w.each(w(this)[0].files,function(e,a){t.push(a.name),v.append(r+"[]",a)}),(c={}).label=w(this).closest(".madxartwork-field-group").find(".madxartwork-field-label").html(),c.name=r,c.value="",c.type=w(this).attr("type"),c.upload=1,c.file_name=t,c.repeater_id=d,c.repeater_id_one=l,c.repeater_label=i,c.repeater_index=n,c.repeater_length=s,null!=w(this).data("pafe-form-builder-remove-this-field-from-repeater")&&(c.repeater_remove_this_field="1"),null!=w(this).data("attach-files")&&(c["attach-files"]=1),g.push(c)}else if(-1!==r.indexOf("[]")){var f=[];"checkbox"==t?w(this).closest(".madxartwork-element").find('[name="'+r+'"]:checked').each(function(){f.push(w(this).val())}):null==(f=w(this).val())&&(f=[]);for(var m,p,u=a="",h=[],b=0;b<f.length;b++)null!=w(this).data("pafe-form-builder-send-data-by-label")&&(m=f[b],"checkbox"==t?0<(p=w(this).closest(".madxartwork-element").find('[value="'+m+'"]')).length&&(u+=p.data("pafe-form-builder-send-data-by-label")+","):0<(p=w(this).find('[value="'+m+'"]')).length&&(u+=p.html()+",")),a+=f[b]+",",null!=w(this).attr("data-pafe-form-booking-item-options")&&(m=f[b],0<(p=w(this).closest(".madxartwork-element").find('[value="'+m+'"]')).length&&h.push(p.attr("data-pafe-form-booking-item-options")));a=a.replace(/,(\s+)?$/,"")}else a="radio"==t||"checkbox"==t?(null!=w(this).data("pafe-form-builder-send-data-by-label")&&(u=w(this).closest(".madxartwork-element").find('[name="'+r+'"]:checked').data("pafe-form-builder-send-data-by-label")),w(this).closest(".madxartwork-element").find('[name="'+r+'"]:checked').val()):null!=w(this).data("pafe-form-builder-calculated-fields")?w(this).siblings(".pafe-calculated-fields-form").text():(null!=w(this).data("pafe-form-builder-send-data-by-label")&&(m=w(this).val().trim(),0<(p=w(this).find('[value="'+m+'"]')).length&&(u=p.html())),w(this).val().trim());null!=a&&((c={}).label=w(this).closest(".madxartwork-field-group").find(".madxartwork-field-label").html(),c.name=r.replace("[]","").replace("form_fields[","").replace("]",""),c.value=a,void 0!==h&&0<h.length&&(c.booking=h),""!=u&&(c.value_label=u),0<w(this).closest(".madxartwork-field-type-calculated_fields").length&&(c.calculation_results=w(this).val().trim()),w(this).closest(".madxartwork-widget").hasClass("pafe-form-builder-conditional-logic-hidden")||(c.repeater_id=d,c.repeater_id_one=l,c.repeater_label=i,c.repeater_index=n,c.repeater_length=s,g.push(c)))}}),v.append("action","pafe_ajax_form_builder_woocommerce_checkout"),v.append("fields",JSON.stringify(g)),v.append("form_id",w(this).attr("data-pafe-woocommerce-checkout-id")),null!=w(this).closest("[data-madxartwork-id]")?v.append("post_id",w(this).closest("[data-madxartwork-id]").attr("data-madxartwork-id")):v.append("post_id",w(this).attr("data-pafe-woocommerce-checkout-post-id")),v.append("product_id",w(this).attr("data-pafe-woocommerce-checkout-product-id")),w.ajax({url:w("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:v,processData:!1,contentType:!1,success:function(e){"1"==e.trim()&&(w("body").trigger("update_checkout"),w("body").trigger("wc_update_cart"),a.find("#place_order").attr("data-pafe-woocommerce-checkout-place-order",""))}})})}w(document).on("keyup change","[data-pafe-form-builder-form-id]",w.debounce(700,function(){e(w(this).attr("data-pafe-form-builder-form-id"))})),w(document).on("click","#place_order",function(e){var a=w(this).closest("[data-pafe-woocommerce-checkout-form-id]").attr("data-pafe-woocommerce-checkout-form-id");null!=a&&(a=w(document).find('[data-pafe-form-builder-form-id="'+a+'"]'),0!=window.pafeValidateFields(a)&&e.preventDefault())}),w(window).on("load",function(){e()}),w(document).on("click","[data-pafe-woocommerce-sales-funnels-add-to-cart]",function(e){e.preventDefault();var a=w(this);a.css("opacity","0.5"),a.find("[data-pafe-woocommerce-sales-funnels-add-to-cart-message]").remove();var e=w(this).attr("data-pafe-woocommerce-sales-funnels-add-to-cart"),t=JSON.parse(e);w.ajax({url:w("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:{action:"pafe_ajax_woocommerce_sales_funnels_add_to_cart",options:t},success:function(e){a.css("opacity","1"),1==JSON.parse(e).status?a.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--success">'+t.message_success+"</div>"):a.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--out-of-stock">'+t.message_out_of_stock+"</div>"),w("body").trigger("update_checkout"),w("body").trigger("wc_update_cart")}})})});