!function($){var WidgetPafeFormBuilderHandlerDate=function($scope,$){var $elements=$scope.find(".madxartwork-date-field"),addDatePicker;$elements.length&&(addDatePicker=function addDatePicker($element){if(!$($element).hasClass("madxartwork-use-native")&&!$($element).hasClass("flatpickr-custom-options")){var minDate=$($element).attr("min")?flatpickr.parseDate($($element).attr("min"),"Y-m-d"):null,maxDate=$($element).attr("max")?flatpickr.parseDate($($element).attr("max"),"Y-m-d"):null;let defaultDate=$($element).attr("data-pafe-form-builder-value")||null;defaultDate=defaultDate&&piotnetCheckDateFormat(defaultDate);var animationLabel=$element.closest(".pafe-form-builder-label-animation"),options={minDate:minDate,maxDate:maxDate,dateFormat:$($element).attr("data-date-format")||null,defaultDate:defaultDate,allowInput:!0,animate:!1,onReady:function(e){e=parseInt(e[0]/864e5,10);$($element).attr("data-pafe-form-builder-date-calculate",e)},onClose:function(e){e=parseInt(e[0]/864e5,10);$($element).attr("data-pafe-form-builder-date-calculate",e)}},options;null!=$($element).data("pafe-form-builder-date-range")&&(options={minDate:minDate,maxDate:maxDate,dateFormat:$($element).attr("data-date-format")||null,defaultDate:defaultDate,allowInput:!0,animate:!1,onClose:function(date){var startDay=flatpickr.formatDate(date[0],"m/d/Y"),endDay=flatpickr.formatDate(date[1],"m/d/Y"),newStartDate=new Date(startDay).getTime(),newEndDate=new Date(endDay).getTime(),newStartDate=eval(newStartDate/1e3+3600),newEndDate=eval(newEndDate/1e3+3600),countDays=eval(newEndDate-newStartDate),countDays=eval(countDays/86400+1);$($element).attr("data-pafe-form-builder-date-range-days",countDays)},mode:"range"}),"english"!=$($element).data("pafe-form-builder-date-language")&&(options.locale=$($element).attr("data-pafe-form-builder-date-language")),checkIsMobile()&&animationLabel&&(options=pafeGetLabelAnimationFlatpickr(options)),$element.flatpickr(options)}},$.each($elements,function(e,a){addDatePicker(a)}))},WidgetPafeFormBuilderHandlerTime=function(e,l){var e=e.find(".madxartwork-time-field"),r=e.attr("data-time-minute-increment");e.length&&l.each(e,function(e,a){!function(a){if(!l(a).hasClass("madxartwork-use-native")){var t=!1,n=a.closest(".pafe-form-builder-label-animation");null!=l(a).attr("data-pafe-form-builder-time-24hr")&&(t=!0);let e=l(a).attr("data-pafe-form-builder-value")||null;e=e&&piotnetCheckDateFormat(e);t={noCalendar:!0,enableTime:!0,allowInput:!0,minuteIncrement:r,time_24hr:t,dateFormat:l(a).attr("data-time-format")||null,defaultDate:e};checkIsMobile()&&n&&(t=pafeGetLabelAnimationFlatpickr(t)),a.flatpickr(t)}}(a)})};function pafeGetLabelAnimationFlatpickr(e){var a={onChange:function(e,a,t){let n=$(t.element).closest(".pafe-form-builder-label-animation");""!=a?n.addClass("pafe-form-builder-field-focus pafe-form-builder-label-animated"):n.removeClass("pafe-form-builder-field-focus pafe-form-builder-label-animated")}};return Object.assign(e,a)}function checkIsMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}function piotnetCheckDateFormat(e){return/^\d+$/.test(e)?10==e.length?Number(1e3*e):Number(e):e}$(window).on("madxartwork/frontend/init",function(){madxartworkFrontend.hooks.addAction("frontend/element_ready/pafe-form-builder-field.default",WidgetPafeFormBuilderHandlerDate),madxartworkFrontend.hooks.addAction("frontend/element_ready/pafe-form-builder-field.default",WidgetPafeFormBuilderHandlerTime)})}(jQuery);