function pafeAddressAutocompleteInitMap(){document.querySelectorAll("[data-pafe-form-builder-address-autocomplete]").forEach(function(t,e,a){var o=new google.maps.places.Autocomplete(t),l=t.getAttribute("data-pafe-form-builder-address-autocomplete-country"),r=t.getAttribute("data-pafe-form-builder-google-maps-lat"),n=t.getAttribute("data-pafe-form-builder-google-maps-lng"),s=t.getAttribute("data-pafe-form-builder-google-maps-zoom");"All"==l?o.setComponentRestrictions({country:[]}):o.setComponentRestrictions({country:l});var d,i,c,u,l=t.closest(".madxartwork-element").querySelectorAll("[data-pafe-form-builder-address-autocomplete-map]");0<l.length&&(n={lat:parseFloat(r),lng:parseFloat(n)},s=parseInt(s),d=new google.maps.Map(l[0],{center:n,zoom:s}),i=new google.maps.InfoWindow,c=t.closest(".madxartwork-element").querySelectorAll(".infowindow-content")[0],i.setContent(c),u=new google.maps.Marker({map:d,anchorPoint:new google.maps.Point(0,-29)}),o.addListener("place_changed",function(){i.close(),u.setVisible(!1);var e,t=o.getPlace();t.geometry?(t.geometry.viewport?d.fitBounds(t.geometry.viewport):(d.setCenter(t.geometry.location),d.setZoom(17)),u.setPosition(t.geometry.location),u.setVisible(!0),e="",t.address_components&&(e=[t.address_components[0]&&t.address_components[0].short_name||"",t.address_components[1]&&t.address_components[1].short_name||"",t.address_components[2]&&t.address_components[2].short_name||""].join(" ")),c.children["place-icon"].src=t.icon,c.children["place-name"].textContent=t.name,c.children["place-address"].textContent=e,i.open(d,u)):window.alert("No details available for input: '"+t.name+"'")})),o.addListener("place_changed",function(){var e=o.getPlace();t.setAttribute("data-pafe-form-builder-google-maps-lat",e.geometry.location.lat()),t.setAttribute("data-pafe-form-builder-google-maps-lng",e.geometry.location.lng()),t.setAttribute("data-pafe-form-builder-google-maps-formatted-address",e.formatted_address),t.setAttribute("data-pafe-form-builder-google-maps-zoom","17"),document.querySelectorAll("[data-pafe-form-builder-calculated-fields-distance-calculation]").forEach(function(e,t,a){var o,l,r;o=null!==e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-from")?e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-from"):document.getElementById(e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-from-field-shortcode").replace('[field id="',"form-field-").replace('"]',"")).getAttribute("data-pafe-form-builder-google-maps-formatted-address"),l=null!==e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-to")?e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-to"):($destination=document.getElementById(e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-to-field-shortcode").replace('[field id="',"form-field-").replace('"]',"")),$destination.getAttribute("data-pafe-form-builder-google-maps-formatted-address")),""!=o&&""!=l&&(r=e.getAttribute("data-pafe-form-builder-calculated-fields-distance-calculation-unit"),calculateDistance(o,l,e.closest(".pafe-field-container").querySelector(".pafe-calculated-fields-form__value"),r,e))}),null!=jQuery(t).attr("data-pafe-form-builder-address-autocomplete")&&jQuery(t).change()})})}function calculateDistance(e,t,o,l,r){""!=e&&""!=t&&(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:[t],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){var a;t!=google.maps.DistanceMatrixStatus.OK||(e.originAddresses[0],e.destinationAddresses[0],"ZERO_RESULTS"===e.rows[0].elements[0].status||(a=e.rows[0].elements[0].distance,t=e.rows[0].elements[0].duration,e=a.value/1e3,a=a.value/1609.34,t.text,t.value,new Event("change"),"km"==l?(o.innerHTML=e.toFixed(2),r.value=e.toFixed(2)):(o.innerHTML=a.toFixed(2),r.value=a.toFixed(2)),jQuery(r).change()))})}function callback(e,t){if(t!=google.maps.DistanceMatrixStatus.OK)console.log(err);else{var a=e.originAddresses[0],o=e.destinationAddresses[0];if("ZERO_RESULTS"!==e.rows[0].elements[0].status){var l=e.rows[0].elements[0].distance,t=e.rows[0].elements[0].duration;console.log(e.rows[0].elements[0].distance);e=l.value/1e3,l=l.value/1609.34,t.text,t.value;return console.log(l.toFixed(2)+"miles"),e.toFixed(2)}console.log("Better get on a plane. There are no roads between "+a+" and "+o)}}jQuery(document).ready(function(e){e(document).on("madxartwork/popup/show",function(){pafeAddressAutocompleteInitMap()})});