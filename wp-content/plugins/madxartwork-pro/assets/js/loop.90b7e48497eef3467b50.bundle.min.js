/*! madxartwork-pro - v3.11.6 - 14-03-2023 */
"use strict";(self.webpackChunkmadxartwork_pro=self.webpackChunkmadxartwork_pro||[]).push([[149],{5030:(e,t,n)=>{var o=n(8003).__;Object.defineProperty(t,"__esModule",{value:!0}),t.SAVE_CONTEXT=t.EDIT_CONTEXT=void 0,t.createElement=createElement,t.default=function addDocumentHandle(e){let{element:t,id:n,title:i=o("Template","madxartwork-pro")}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(s===l){if(!n||!t)throw Error("`id` and `element` are required.");if(isCurrentlyEditing(t)||hasHandle(t))return}const d=createHandleElement({title:i,onClick:()=>onDocumentClick(n,l,r,a)},l);t.prepend(d),s===l&&(t.dataset.editablemadxartworkDocument=n)};const i="madxartwork-document-handle",s="edit";t.EDIT_CONTEXT=s;const l="madxartwork-document-save-back-handle",r="save";function isCurrentlyEditing(e){return e.classList.contains("madxartwork-edit-mode")}function hasHandle(e){return!!e.querySelector(":scope > .madxartwork-document-handle")}function createHandleElement(e,t){let{title:n,onClick:r}=e;const a=createElement({tag:"div",classNames:s===t?[i]:[i,l],children:[createElement({tag:"i",classNames:[getHandleIcon(t)]}),createElement({tag:"div",classNames:[`${s===t?i:l}__title`],children:[document.createTextNode(s===t?o("Edit %s","madxartwork-pro").replace("%s",n):o("Save %s","madxartwork-pro").replace("%s",n))]})]});return a.addEventListener("click",r),a}function getHandleIcon(e){let t="eicon-edit";return r===e&&(t=madxartworkFrontend.config.is_rtl?"eicon-arrow-right":"eicon-arrow-left"),t}function createElement(e){let{tag:t,classNames:n=[],children:o=[]}=e;const i=document.createElement(t);return i.classList.add(...n),o.forEach((e=>i.appendChild(e))),i}async function onDocumentClick(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s===t?(window.top.$e.internal("panel/state-loading"),await window.top.$e.run("editor/documents/switch",{id:parseInt(e),onClose:n,selector:o}),window.top.$e.internal("panel/state-ready")):(madxartworkCommon.api.internal("panel/state-loading"),madxartworkCommon.api.run("editor/documents/switch",{id:madxartwork.config.initial_document.id,mode:"save",shouldScroll:!1,selector:o}).finally((()=>madxartworkCommon.api.internal("panel/state-ready"))))}t.SAVE_CONTEXT=r},6685:(e,t,n)=>{var o=n(8003).__,i=n(3203);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(n(2298)),l=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=e[s]}o.default=e,n&&n.set(e,o);return o}(n(5030));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}class Loop extends s.default{getSkinPrefix(){return""}getDefaultSettings(){const e=super.getDefaultSettings();return e.selectors.post=".madxartwork-loop-container .madxartwork",e.selectors.postsContainer=".madxartwork-loop-container",e.classes.inPlaceTemplateEditable="madxartwork-in-place-template-editable",e}fitImages(){}getVerticalSpaceBetween(){return madxartworkProFrontend.utils.controls.getResponsiveControlValue(this.getElementSettings(),"row_gap","size")}onInPlaceEditTemplate(){this.$element.addClass(this.getDefaultSettings().classes.inPlaceTemplateEditable),this.elementsToRemove=[],this.handleSwiper();const e=this.getElementSettings("template_id");this.elementsToRemove=[...this.elementsToRemove,"style#loop-"+e,"link#font-loop-"+e,"style#loop-dynamic-"+e],this.elementsToRemove.forEach((e=>{this.$element.find(e).remove()}))}handleSwiper(){const e=this.elements.$postsContainer.data("swiper");e&&(e.slideTo(0),e.autoplay.pause(),e.allowTouchMove=!1,e.params.autoplay.delay=1e6,e.update(),this.elementsToRemove=[...this.elementsToRemove,".swiper-pagination",".madxartwork-swiper-button",".madxartwork-document-handle"])}attachEditDocumentHandle(){const e=this.getElementSettings("template_id"),t=madxartwork.getElementData(madxartworkFrontend.config.elements.data[this.getModelCID()]),n=this.$element.find(t?.edit_handle_selector).first()[0];n&&e&&(this.isFirstEdit()?this.$element.find(".madxartwork-swiper-button").remove():(0,l.default)({element:n,title:o("Template","madxartwork-pro"),id:e},l.EDIT_CONTEXT,(()=>this.onInPlaceEditTemplate()),".madxartwork-element-"+this.getID()+" .madxartwork-"+e))}isFirstEdit(){return this.$element.has(".e-loop-first-edit").length}handleCTA(){const e=document.querySelector(`[data-id="${this.getID()}"] .e-loop-empty-view__wrapper`);if(!e)return;const t=e.attachShadow({mode:"open"});t.appendChild(madxartworkPro.modules.loopBuilder.getCtaStyles()),t.appendChild(madxartworkPro.modules.loopBuilder.getCtaContent(this.getWidgetType()));t.querySelector(".e-loop-empty-view__box-cta").addEventListener("click",(()=>{madxartworkPro.modules.loopBuilder.createTemplate()}))}doEditorInitAction(){madxartwork.hooks.doAction("editor/widgets/loop-grid/on-init",this)}onInit(){super.onInit(...arguments),madxartworkFrontend.isEditMode()&&(this.doEditorInitAction(),this.attachEditDocumentHandle(),this.handleCTA())}}t.default=Loop},2298:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=madxartworkModules.frontend.handlers.Base.extend({getSkinPrefix:()=>"classic_",bindEvents(){madxartworkFrontend.addListenerOnce(this.getModelCID(),"resize",this.onWindowResize)},unbindEvents(){madxartworkFrontend.removeListeners(this.getModelCID(),"resize",this.onWindowResize)},getClosureMethodsNames(){return madxartworkModules.frontend.handlers.Base.prototype.getClosureMethodsNames.apply(this,arguments).concat(["fitImages","onWindowResize","runMasonry"])},getDefaultSettings:()=>({classes:{fitHeight:"madxartwork-fit-height",hasItemRatio:"madxartwork-has-item-ratio"},selectors:{postsContainer:".madxartwork-posts-container",post:".madxartwork-post",postThumbnail:".madxartwork-post__thumbnail",postThumbnailImage:".madxartwork-post__thumbnail img"}}),getDefaultElements(){var e=this.getSettings("selectors");return{$postsContainer:this.$element.find(e.postsContainer),$posts:this.$element.find(e.post)}},fitImage(e){var t=this.getSettings(),n=e.find(t.selectors.postThumbnail),o=n.find("img")[0];if(o){var i=n.outerHeight()/n.outerWidth(),s=o.naturalHeight/o.naturalWidth;n.toggleClass(t.classes.fitHeight,s<i)}},fitImages(){var e=jQuery,t=this,n=getComputedStyle(this.$element[0],":after").content,o=this.getSettings();t.isMasonryEnabled()?this.elements.$postsContainer.removeClass(o.classes.hasItemRatio):(this.elements.$postsContainer.toggleClass(o.classes.hasItemRatio,!!n.match(/\d/)),this.elements.$posts.each((function(){var n=e(this),i=n.find(o.selectors.postThumbnailImage);t.fitImage(n),i.on("load",(function(){t.fitImage(n)}))})))},setColsCountSettings(){const e=this.getElementSettings(),t=this.getSkinPrefix(),n=madxartworkProFrontend.utils.controls.getResponsiveControlValue(e,`${t}columns`);this.setSettings("colsCount",n)},isMasonryEnabled(){return!!this.getElementSettings(this.getSkinPrefix()+"masonry")},initMasonry(){imagesLoaded(this.elements.$posts,this.runMasonry)},getVerticalSpaceBetween(){let e=madxartworkProFrontend.utils.controls.getResponsiveControlValue(this.getElementSettings(),`${this.getSkinPrefix()}row_gap`,"size");return""===this.getSkinPrefix()&&""===e&&(e=this.getElementSettings("item_gap.size")),e},runMasonry(){var e=this.elements;e.$posts.css({marginTop:"",transitionDuration:""}),this.setColsCountSettings();var t=this.getSettings("colsCount"),n=this.isMasonryEnabled()&&t>=2;if(e.$postsContainer.toggleClass("madxartwork-posts-masonry",n),!n)return void e.$postsContainer.height("");const o=this.getVerticalSpaceBetween();new madxartworkModules.utils.Masonry({container:e.$postsContainer,items:e.$posts.filter(":visible"),columnsCount:this.getSettings("colsCount"),verticalSpaceBetween:o||0}).run()},run(){setTimeout(this.fitImages,0),this.initMasonry()},onInit(){madxartworkModules.frontend.handlers.Base.prototype.onInit.apply(this,arguments),this.bindEvents(),this.run()},onWindowResize(){this.fitImages(),this.runMasonry()},onElementChange(){this.fitImages(),setTimeout(this.runMasonry)}});t.default=n}}]);