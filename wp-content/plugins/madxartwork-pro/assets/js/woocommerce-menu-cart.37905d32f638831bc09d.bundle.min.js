/*! madxartwork-pro - v3.11.6 - 14-03-2023 */
"use strict";(self.webpackChunkmadxartwork_pro=self.webpackChunkmadxartwork_pro||[]).push([[102],{2083:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class _default extends madxartworkModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{container:".madxartwork-menu-cart__container",main:".madxartwork-menu-cart__main",toggle:".madxartwork-menu-cart__toggle",toggleButton:"#madxartwork-menu-cart__toggle_button",toggleWrapper:".madxartwork-menu-cart__toggle_wrapper",closeButton:".madxartwork-menu-cart__close-button",productList:".madxartwork-menu-cart__products"},classes:{isShown:"madxartwork-menu-cart--shown"}}}getDefaultElements(){const e=this.getSettings("selectors");return{$container:this.$element.find(e.container),$main:this.$element.find(e.main),$toggleWrapper:this.$element.find(e.toggleWrapper),$closeButton:this.$element.find(e.closeButton)}}toggleCart(){this.isCartOpen?this.hideCart():this.showCart()}showCart(){if(this.isCartOpen)return;const e=this.getSettings("classes"),t=this.getSettings("selectors");this.isCartOpen=!0,this.$element.addClass(e.isShown),this.$element.find(t.toggleButton).attr("aria-expanded",!0),this.elements.$main.attr("aria-hidden",!1),this.elements.$container.attr("aria-hidden",!1)}hideCart(){if(!this.isCartOpen)return;const e=this.getSettings("classes"),t=this.getSettings("selectors");this.isCartOpen=!1,this.$element.removeClass(e.isShown),this.$element.find(t.toggleButton).attr("aria-expanded",!1),this.elements.$main.attr("aria-hidden",!0),this.elements.$container.attr("aria-hidden",!0)}automaticallyOpenCart(){"yes"===this.getElementSettings().automatically_open_cart&&this.showCart()}refreshFragments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(madxartworkFrontend.isEditMode()&&madxartworkPro.modules.woocommerce.didManuallyTriggerAddToCartEvent(t))return!1;const n=[];jQuery.each(madxartworkFrontend.documentsManager.documents,(e=>{n.push(e)})),jQuery.ajax({type:"POST",url:madxartworkProFrontend.config.ajaxurl,context:this,data:{action:"madxartwork_menu_cart_fragments",templates:n,_nonce:madxartworkProFrontendConfig.woocommerce.menu_cart.fragments_nonce,is_editor:madxartworkFrontend.isEditMode()},success(e){e?.fragments&&jQuery.each(e.fragments,((e,t)=>{jQuery(e).replaceWith(t)}))},complete(){"added_to_cart"===e&&this.automaticallyOpenCart()}})}bindEvents(){const e=madxartworkProFrontend.config.woocommerce.menu_cart,t=-1===e.cart_page_url.indexOf("?")?window.location.origin+window.location.pathname:window.location.href,n=e.cart_page_url,r=e.cart_page_url===t,o=e.checkout_page_url===t,s=this.getSettings("selectors");if(r&&o)return void this.$element.find(s.toggleButton).attr("href",n);const i=this.getSettings("classes");this.isCartOpen=this.$element.hasClass(i.isShown);"mouseover"===this.getElementSettings().open_cart?(this.elements.$toggleWrapper.on("mouseover click",s.toggleButton,(e=>{e.preventDefault(),this.showCart()})),this.elements.$toggleWrapper.on("mouseleave",(()=>this.hideCart()))):this.elements.$toggleWrapper.on("click",s.toggleButton,(e=>{e.preventDefault(),this.toggleCart()})),madxartworkFrontend.elements.$document.on("click",(e=>{if(!this.isCartOpen)return;const t=jQuery(e.target);t.closest(this.elements.$main).length||t.closest(s.toggle).length||this.hideCart()})),this.elements.$closeButton.on("click",(e=>{e.preventDefault(),this.hideCart()})),madxartworkFrontend.elements.$document.on("keyup",(e=>{27===e.keyCode&&this.hideCart()})),madxartworkFrontend.elements.$body.on("wc_fragments_refreshed removed_from_cart added_to_cart",((e,t)=>this.refreshFragments(e.type,t))),madxartworkFrontend.addListenerOnce(this.getUniqueHandlerID()+"_window_resize_dropdown","resize",(()=>this.governDropdownHeight())),madxartworkFrontend.elements.$body.on("wc_fragments_loaded wc_fragments_refreshed",(()=>this.governDropdownHeight()))}unbindEvents(){madxartworkFrontend.removeListeners(this.getUniqueHandlerID()+"_window_resize_dropdown","resize")}onInit(){super.onInit(),madxartworkProFrontend.config.woocommerce.productAddedToCart&&this.automaticallyOpenCart(),this.governDropdownHeight()}governDropdownHeight(){if("mini-cart"!==this.getElementSettings().cart_type)return;const e=this.getSettings("selectors"),t=this.$element.find(e.productList),n=this.$element.find(e.toggle);if(!t.length||!n.length)return;this.$element.find(e.productList).css("max-height","");const r=document.documentElement.clientHeight,o=n.height()+parseInt(this.elements.$main.css("margin-top")),s=n[0].getBoundingClientRect().top,i=t.height(),a=r-s-o-(this.elements.$main.prop("scrollHeight")-i)-30,l=Math.max(120,a);t.css("max-height",l)}}t.default=_default}}]);